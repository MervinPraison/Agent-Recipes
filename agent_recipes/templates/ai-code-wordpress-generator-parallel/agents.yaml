framework: praisonai
topic: "AI Code & Tools {{today}}"

# Variables section - today is populated by get_current_date tool
variables:
  today: "January 2026"  # Default fallback, overridden by get_current_date

# =============================================================================
# AI CODE BLOG POST GENERATOR - PARALLEL MULTI-TOPIC PIPELINE
# =============================================================================
# 
# FOCUS: AI Tools, AI Programming, Code, and Techniques for AI Engineers
# 
# HOW IT WORKS:
# 1. Gather AI coding topics (ai-topic-gatherer)
# 2. Filter duplicates, generate keywords, research (ai-research-pipeline)
# 3. Write code-focused blog posts
# 4. Publish to WordPress (wordpress-publisher)
#
# USES MODULAR RECIPES:
# - include: ai-topic-gatherer
# - include: ai-research-pipeline
# - include: wordpress-publisher
# =============================================================================

agents:
  # Agent that writes code-focused blog posts
  content_writer:
    role: Technical AI Content Writer and Developer Advocate
    goal: Write code-focused, practical blog posts with working examples for AI engineers
    backstory: |
      You MUST use correct Gutenberg block format where content is inside HTML tags.
      You write about ONE topic only - never combine multiple topics.
      You use British English (colour, centre, organisation).
      
      CONTENT FOCUS (CODE-FIRST):
      - Every article MUST include code examples
      - Emphasise practical implementation over theory
      - Include installation commands, imports, and usage examples
      - Show before/after comparisons when relevant
      - Include error handling and edge cases
      
      TITLE RULES (SEO-CRITICAL):
      - Include SPECIFIC names: tool, library, framework, or version
      - Include SPECIFIC details: version numbers, language, platform
      - NEVER use generic words like "Insights", "Findings", "Overview", "Guide"
      - BAD: "Insights on Multi-Agent Systems Research Findings"
      - GOOD: "LangChain 0.2 Agents Tutorial with Python Code Examples"
      - GOOD: "How to Build RAG Systems with LlamaIndex 0.10"
      - GOOD: "OpenAI Assistants API v2 Complete Python Implementation"
      - GOOD: "Anthropic Claude 3 Function Calling Code Tutorial"

steps:
  # ─────────────────────────────────────────────────────────────────────────────
  # STEP 1: Gather AI coding topics (modular recipe)
  # ─────────────────────────────────────────────────────────────────────────────
  - include: ai-topic-gatherer

  # ─────────────────────────────────────────────────────────────────────────────
  # STEP 2-4: Filter duplicates, generate keywords, research (modular recipe)
  # ─────────────────────────────────────────────────────────────────────────────
  - include: ai-research-pipeline

  # ─────────────────────────────────────────────────────────────────────────────
  # STEP 5: Write CODE-FOCUSED blog posts IN PARALLEL
  # ─────────────────────────────────────────────────────────────────────────────
  - loop:
      over: research_results
      parallel: true
      max_workers: 4
    agent: content_writer
    output_json:
      type: object
      properties:
        title:
          type: string
          description: SEO-optimized title with specific tool/library names (6-10 words, no colons)
        content:
          type: string
          description: Full Gutenberg block formatted content with code examples
    action: |
      ═══════════════════════════════════════════════════════════════════════
      RESEARCH CONTENT TO CONVERT (USE ALL OF THIS - DO NOT SKIP ANY SECTION)
      ═══════════════════════════════════════════════════════════════════════
      
      {{item}}
      
      ═══════════════════════════════════════════════════════════════════════
      CRITICAL INSTRUCTIONS
      ═══════════════════════════════════════════════════════════════════════
      
      1. INCLUDE ALL content from the research - DO NOT skip ANY section
      
      2. BE LESS DESCRIPTIVE - focus on code, steps, and information
         - Minimal explanatory text, let the code speak
         - Short paragraphs between code blocks
      
      3. PROGRESSIVE STRUCTURE - start simple, build to complex
         - Begin with installation and basic setup
         - Then simple usage examples
         - Then intermediate patterns
         - Finally advanced features and configurations
         - Do NOT show complex code at the top
      
      ═══════════════════════════════════════════════════════════════════════
      WORDPRESS GUTENBERG BLOCKS REFERENCE
      ═══════════════════════════════════════════════════════════════════════
      
      ✅ PARAGRAPH:
      <!-- wp:paragraph -->
      <p>Your paragraph text goes here inside the p tags.</p>
      <!-- /wp:paragraph -->
      
      ✅ HEADING (h2):
      <!-- wp:heading -->
      <h2 class="wp-block-heading">Your Heading Text</h2>
      <!-- /wp:heading -->
      
      ✅ HEADING (h3):
      <!-- wp:heading {"level":3} -->
      <h3 class="wp-block-heading">Subheading Text</h3>
      <!-- /wp:heading -->
      
      ✅ LIST (unordered):
      <!-- wp:list -->
      <ul class="wp-block-list">
      <li>First item</li>
      <li>Second item</li>
      </ul>
      <!-- /wp:list -->
      
      ✅ CODE (IMPORTANT FOR AI CODE CONTENT):
      <!-- wp:code -->
      <pre class="wp-block-code"><code>your code here</code></pre>
      <!-- /wp:code -->
      
      ✅ CODE WITH LANGUAGE (PREFERRED):
      <!-- wp:code {"language":"python"} -->
      <pre class="wp-block-code"><code class="language-python">import langchain; agent = langchain.agents.create_react_agent()</code></pre>
      <!-- /wp:code -->
      
      ✅ TABLE:
      <!-- wp:table -->
      <figure class="wp-block-table"><table>
      <thead><tr><th>Header</th></tr></thead>
      <tbody><tr><td>Data</td></tr></tbody>
      </table></figure>
      <!-- /wp:table -->
      
      ═══════════════════════════════════════════════════════════════════════
      CRITICAL RULES FOR AI CODE CONTENT
      ═══════════════════════════════════════════════════════════════════════
      
      1. ONE TOPIC ONLY - do NOT combine multiple tools/libraries
      2. Content MUST be inside HTML tags (<p>, <h2>, <ul>, etc.)
      3. Title should be 6-10 words, NO colons, include tool/library name
      4. Use British English (colour, centre, organisation)
      5. MUST include at least 3-5 code examples throughout the article
      6. Include installation commands at the start
      7. Show complete, runnable code examples - not snippets
      8. Include import statements in all code blocks
      9. Specify the programming language in code blocks
      10. Include version numbers when relevant
      11. Less Descriptive and Code focused
      
      ARTICLE STRUCTURE FOR CODE CONTENT:
      - Introduction: What the tool/library does
      - Installation: pip/npm install commands
      - Basic Usage: Simple code example
      - Advanced Features: More complex examples
      - Common Patterns: Best practices code
      - Conclusion: Summary and resources
      
      OUTPUT FORMAT:
      ARTICLE_TITLE: [Title with tool/library name]
      ARTICLE_CONTENT:
      <!-- wp:paragraph -->
      <p>Opening paragraph...</p>
      <!-- /wp:paragraph -->
      <!-- wp:code {"language":"python"} -->
      <pre class="wp-block-code"><code class="language-python">pip install library-name</code></pre>
      <!-- /wp:code -->
      ...more blocks...
    expected_output: |
      ARTICLE_TITLE: focused technical title with tool name
      ARTICLE_CONTENT: Gutenberg blocks with code examples inside HTML tags

  # ─────────────────────────────────────────────────────────────────────────────
  # STEP 6: Publish to WordPress
  # ─────────────────────────────────────────────────────────────────────────────
  - include: wordpress-publisher

# Enable context management at workflow level
context: true